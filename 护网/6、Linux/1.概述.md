

# 一 ,简介

## 1. 概念

```
Linux 是一个开源的类 Unix 操作系统内核，由Linus Torvalds 在1991年首次发布。它遵循自由软件和开源开发的原则，允许用户自由地使用、修改和分发。Linux 内核是许多流行操作系统的核心，包括但不限于 Ubuntu、Fedora、Debian、Red Hat Enterprise Linux(RHEL)、CentOs 和Android。以下是 Linux 的一些关键特点
```

## 2. 特点

```
开源
多用户，多任务
稳定性和安全性
灵活性和可定制性
丰富的软件生态
命令行界面（CLI）和图形化用户界面（GUI）
社区支持
版本众多
免费
```

# 二， Lin系统启动过程

Linux 系统的启动过程是一个涉及多个步骤的复杂过程，它从硬件开始，最终引导到用户空间的操作系统。以下是 Linux 系统启动过程的一般概述:

**硬件加电自检(POST)**

- 当计算机启动时，首先进行的是硬件加电自检(POST)，这个过程由 BIOS/UEFI 固件执行。它检查硬件是否正常工作，如 CPU、内存、硬盘等。

**启动管理器(Bootloader)**

- POST 完成后，BIOS/UEFI会查找启动设备(通常是硬盘)上的启动管理器(如 GRUB)。启动管理器负责加载操作系统的内核。

**加载内核**

- 用户选择要启动的操作系统后，启动管理器加载 Linux 内核以及初始 ramdisk(initrd 或initramfs)。内核是操作系统的核心，而初始ramdisk 包含在系统完全启动前所需的文件和脚本。

**内核初始化**

- 内核加载后，它开始初始化硬件设备，设置内存管理，挂载 root 文件系统，并启动第一个用户空间进程(通常是/sbin/init 或systemd)。

**启动 init 进程**

- /sbin/init 或 systemd 是系统的第一个用户空间进程，它的进程 ID(PID) 通常是 1。这个进程负责启动系统上的其他所有进程。

**运行系统和服务**

- 对于传统的 System Vinit(/sbin/init)，它会根据 /etc/inittab 文件中的设置，运行不同运行级别的脚本，启动必要的服务。
- 对于 systemd ，它会按照配置文件(通常位于/etc/systemd/system/)中的指令，启动目标(targets)和服务。

**用户登录**

- 一旦系统服务启动完成，就会启动图形界面(如果配置了的话)，或者进入命令行界面等待用户登录。

**用户空间**

- 用户登录后，就可以开始使用系统了。

这个启动过程可能会因 Linux 发行版和配置的不同而有所差异，特别是systemd 的引入，它提供了一种新的初始化系统和服务管理方式，与System V init 有所不同。

了解 Linux 系统的启动过程对于系统管理员来说非常重要，因为它有助于故障排除和性能优化。

# 三，系统目录结构

Linux 系统的目录结构，也称为文系统层次结构，遵循一种标准的布局，这是由 FilesystemHierarchy Standard (FHS)定义的。这种层次结构在大多数 Linux 发行版中都是相同的，它提供了一种一致的方式来组织和管理文件。以下是 Linux文件系统的主要目录及其用途的简要介绍：

**/**

```
(根目录):这是文件系统层次结构的最顶层目录。所有其他目录都是根目录的子目录
```

**/bin**

```
包含基本的用户命令和程序，如1s、/bin :cp和bash。这些命令对于所有用户和大多数单用户模式都是必要的
```

**/boot** 

```
包含启动 Linux 系统所需的文件，如内核和初始 ramdisk
```

**/dev**

```
包含设备文件，它们是访问硬件设备的接口。例如，/dev/nu11 是一个特殊的设备，它会丢弃所有写入它的数据
```

**/etc**

```
包含系统和某些应用程序的配置文件。这些文件通常由系统管理员手动编辑以配置系统
```

**/home**

```
包含普通用户的个人家目录。每个用户都有一个以用户名命名的子目录
```

**/lib**

```
包含系统和应用程序所需的库文件。这些库文件对于运行大多数命令和程序是必要的。
```

**/media**

```
用于临时挂载可移动存储设备，如 USB闪存驱动器、CD 和 DVD
```

**/mnt**

```
通常用于临时挂载文件系统，尽管现在/media更常用于这个目的。
```

**/opt** 

```
用于安装可选的第三方软件包
```

**/proc**

```
是一个虚拟文件系统，包含有关正在运行的进程和内核的信息
```

**/root** 

```
系统管理员(root 用户)的主目录
```

**/sbin** 

```
包含系统管理命令和程序，如fdisk和ifconfig 
```

**/srv**

```
包含系统和服务提供的数据，如 Web, FTP 和其他服务器的数据
```

**/sys**

```
是一个虚拟文件系统，提供对内核数据结构的访问，用于系统信息和硬件参数
```

**/tmp**

```
包含临时文件。这个目录在系统启动时被清空
```

**/usr**

```
包含用户文档、应用程序和二进制文件。它进一步分为和/usr/bin/usr/lib等子目录。/usr/share

        /usr/bin:包含用户命令和程序
        /usr/lib:包含用户应用程序的库文件
        /usr/share:包含共享数据，如图标、文档和本地化文件
```

**/var**

```
包含频繁变化的文件，如日志文件、数据/var库和邮件
```

了解 Linux 的目录结构对于系统管理员和用户来说都是非常重要的，因为它有助于更好地管理文件和应用程序

# 三，Linux忘记密码解决办法

## 1. 使用单用户模式(Single User Mode)

```
在启动时，可以在 GRUB 菜单选择进入单用户模式或恢复模式
这通常会以 root 用户启动，而不需要密码
一旦以 root 用户登录，你可以使用passwd 命令来重置密码
```

## 2. 使用 GRUB 引导编辑器

```
在 GRUB 启动菜单时，编辑启动条目，添加init=/bin/bash 参数，这将启动一个 bashshell

然后，你可以使用mount命令重新挂载根文件系统为读写模式，并使用passwd 命令更改密码
```

## 3. 使用live CD/USB

```
使用一个 Linux live CD/USB 启动你的计算机
挂载你的系统的根文件系统
使用 chroot 命令切换到你的系统环境，然后使用passwd命令更改密码
```

## 4.使用 systemd 的 rescue 目标

```
对于使用 systemd 的系统，可以在启动时选择进入救援模式或 emergency 模式
这将允许你以 root 用户登录，然后可以更改密码
```

## 5. 使用特定的密码重置工具

```
有些 Linux 发行版提供了专门的工具或命令来重置密码，如 forget_my_password
```

## 6.编辑 /etc/shadow 文件

```
通过上述任一方法获得 root 访问权限后，可以直接编辑 /etc/shadow文件，删除或修改对应用户的密码行
```

# 四，文件属性

**文件类型**

```
-: 普通文件
d: 目录
l: 符号链接(软链接)
```

**权限**

作用：文件的权限决定了谁可以读取、写入或执行文件。权限分为三组

```
权限：
    所有者(owner)
    组(group)
    其他(others)

权限由以下字符表示:
	r: 可读
	w: 可写
	x: 可执行
	-: 没有该权限
```

**所有者(Owner)和组(Group)**

每个文件都有一个所有者和一个所属组。可以通过 ls -l查看这些信息，或者使用chown和 chgrp命令更改它们

**大小 (Size)**
文件的大小以字节为单位显示，目录的大小通常为 4096 字节

**时间戳**

```
文件的时间戳包括
	修改时间(mtime):文件内容最后修改的时间
	访问时间(atime):文件最后被访问的时间
	改变时间(ctime):文件的元数据(如权限所有者)最后改变的时间
```

**链接数(Links)**

对于普通文件，链接数通常是 1。对于目录，链接数是其子目录和符号链接的总数加上2(一个是目录本身的链接，另一个是目录的“ . ”表示当前目录）

**inode (i-node)**
inode 是文件系统的一个数据结构，包含了文件的元数据，但不包含文件名。每个文件和目录都有一个唯一的 inode 号

**设备号(Device)**
对于字符设备和块设备文件，这个属性表示设备文件对应的设备号

**特殊权限(Special Permissions)**
有时你可能还会看到一些特殊权限，如s(setuid/setgid)或 t (粘滞位)

**文件名(Name)**
文件或目录的名称，由用户在创建时指定

了解和正确管理这些文件属性对于系统安全和文件管理非常重要。使用chmod、chownchgrp和 touch 等命令可以修改文件的权限、所有者组和时间戳。

