# 一、 数据库基本概念

#### 1.数据( Data)

```
用来记录信息的可识别符号，是信息的具体表现形式。数据是对现实世界的事物采用计算机能够识别、存储和处理的方式进行描述，其具体表现形式可以是数字、文本、图像、音频、视频等。
```

#### 2.数据库(Database，DB）

```
·用来存放数据的仓库。
```

#### 3.数据库管理系统(Database ManagementSystem，DBMS)

```
是操纵和管理数据库的软件，为应用程序提供访问数据库的方法，包括数据的定义、数据操纵、数据库运行管理及数据库建立与维护等功能。
```

#### 4.数据库系统

```
数据库系统(DataBase System，DBS)由软件、数据库和数据管理员组成
```

#### 5.关系型数据库

```
在关系模型中，实体和实体间的联系均由单一的关系来表示。在关系型数据库中，关系就是表，一个关系型数据库就是若干个二维表的集合
```

![image-20240531153128449](D:/%E6%96%87%E6%A1%A3/%E7%AC%94%E8%AE%B0/image-20240531153128449.png)

# 二、SQL 语言

#### 1.SQL(Structured Query Language ，结构化查询语言)

```
是关系型数据库语言的标准。
```

#### 2.数据定义语言(Data Definition Language,DDL)

```
用于创建数据库和数据库对象，为数据库操作提供对象。例如，数据库、表、存储过程、视图等都是数据库中的对象，都需要通过定义才能使用。DDL中主要的 SOL语句包括CREATE、ALTER、DROP，分别用来实现数据库及数据库对象的创建、更改和删除操作。
```

#### 3.数据操纵语言(Data Manipulation Language,DML)

```
主要是用于操纵数据库中的数据。包括INSERT、SELECT、UPDATE、DELETE 等语句。
```

#### 4.数据控制语言(Data Control Language,DCL)

```
主要实现对象的访问权限及对数据库操作事务的控制，要包括 GRANT、REVOKECOMMIT和ROLLBACK
```

数据库中的操作都是通过执行 SQL语句来完成，它**可以方便的嵌套在Java 、C#、 PHP 等程序语言**中，以实现应用程序对数据的査询、插入、修改和删除等操作。

# 三、MySQL数据库

## 1.概述

```
可移植性好
强大的数据保护功能
提供多种存储器引擎
功能强大
支持大型数据库
运行速度快
```

## 2.环境

```
bin:用于放置可执行文件

data:用于放置日志文件以及数据库include 文件夹:用于放置头文件，如mysql.h、mysqld_ernam0

lib:用于放置库文件。

share:用于存放字符集、语言等信息。

my.ini:是 MySQL 数据库中使用的配置文件。

my-huge.ini:适合超大型数据库的配置文件。

my-large.ini:适合大型数据库的配置文件。

my-medium.ini:适合中型数据库的配置文件。

my-small.ini:适合小型数据库的配置文件。

my-template.ini:是配置文件的模板

my-innodb-heavy-4G.ini:表示该配置文件只对于InnoDB 存储引擎有效，而且服务器的内存不能小于 4GB。
```

## 3.My.ini

```
#数据库连接端口，默认为 3306
[client]
port=3306

[mysql]
#客户端默认字符集
default-character-set=gbk
#服务器参数配置
#SERVER SECTION

[mysqldl]
#服务器参数配置
# MySOL 服务程序 TCP/IP 监听端口默认为 3306
port=3360

#服务器安装路径
basedir="D:/ProgramFiles/MySOL/MySOL Server 5.5/

#服务器中数据文件的存储路径，读者可以根据需要修改些参数
datadir="C:/ProqramData/MySOL/MySOL Server 5.5/Data!"

#设置服务器端的字符集
character-set-server=utf8

#设置默认的存储引擎，当创建表时若不指定存储类型，则为INNODB
default-storage-engine=INNODB

#设置 MySOL服务器的最大连接数
```

![image-20240531153816441](D:/%E6%96%87%E6%A1%A3/%E7%AC%94%E8%AE%B0/image-20240531153816441.png)

## 4.使用

```mysql
mysql -h hostname -u username -pnet stop mysql55

mysql为登录命令名，存放在 MySQL的安装目录下
-h表示后面的参数 hostname 为服务器的主机地址，当客户端与服务器在同一台机器上时，hostname 可以使用localhost 或127.0.0.1。
-u表示后面的参数 username为登录 MySQL服务的用户名。
-p则表示后面要输入的参数为指定用户的密码。
```

## 5.登录

```cmd
mysql -h localhost -u root -p
```

## 6.MySQL相关命令

```mysql
help
```

|   命令    | 简写 |                     说明                     |
| :-------: | :--: | :------------------------------------------: |
|    ？     |  \?  |                 显示帮助信息                 |
|   clear   |  \c  |               消除当前输入语句               |
|  connect  |  \r  |      连接到服务器，可选参数数据库和主机      |
| delimiter |  \d  |                设置语言分隔符                |
|    ego    |  \G  |      发送命令到mysql服务器，并显示结果       |
|   exit    |  \q  |                退出MySQL服务                 |
|    go     |  \G  |            发送命令到mysql服务器             |
|   help    |  \h  |                 显示帮助信息                 |
|   notee   |  \t  |                 不写输出文件                 |
|   print   |  \p  |                 打印当前命令                 |
|  prompt   |  \R  |              改变MySQL提示信息               |
|   quit    |  \q  |                  退出MySQL                   |
|  rehash   |  \#  |                 重建完成散列                 |
|  source   | \\.  |               执行SQL脚本文件                |
|  status   |  \s  |             获取MySQL的状态信息              |
|    tee    |  \T  | 设置输出文件，并将信息添加所有给定的输出文件 |

## 7.MySQL字符集

```
字符集是一套符号和编码的规则。

MySOL的字符集包括字符集(CHARACTER)和校对规则(COLLATION)两个概念，其中字符集是用来定义MySOL存储字符串的方式，校对规则则是定义了比较字符串的方式。
    1)latin1:是系统启动时默认的字符集，它是一个8位的字符集，它把介于 128-255 之间的字符用于拉丁字母表中的特殊字符的编码，也因此而得名。
    2)utf8:也称为通用转换格式(8-bit Unicode Transformation Format)，是针对 Unicode 字符的一种变长字符编码。由 Ken Thompos 在 1992 年创建，用以解决国际上字符的一种多字节编码，它对英文使用 8位、中文使用 24 位来编码。 utf-8 包含了全世界所有国家需要用到的字符，是一种国际编码，通用性强。在 Internet应用开始
中广泛使用。
	3)gb2312和gbk:gb2312是简体中文集，而gbk是对 gb2312的扩展。gbk的文字编码采用双字节表示，即不论中文和英文字符都使用双字节，为了区分中英文，gbk在编码时将中文每个字节的最高位设为1。gbk 包含了全部中文字符，是中国国家编码 ·
```

### 命令

```mysql
1.查看MySQL支持的字符集
show character set;

2.查看utf8相关字符集的校对规则
show collation like 'utf8%';
```

### 设置字符集

MySOL 支持服务器数据库(Database、数据表(TablServer)和连接层(Connection)五个层级的字符集设置。e)、字段(Field)在同一台服务器、同一个数据库、甚至同一个表的不同字段都可以指定使用不同的字符集。

|        系统变量名        |                             说明                             |
| :----------------------: | :----------------------------------------------------------: |
|   character_set_server   | 默认的内部操作字符集，标识服务器的字符集。服务器启动时通过该变量设置字符集，当未设置值时，系统默认为Iatin1。该变量为 create database 命令提供默认值 |
|   character_set_client   | 客户端来源数据使用的字符集，该变量用来决定 MySQL如何解释客户端发到服务端的SQL命令文字 |
| character_set_connection |   连接层字符集。用来决定 MySQL如何处理客户端发来的SQL命令    |
|  character_set_results   | 查询结果字符集。当 SQL返回结果时，这个变量的取值决定了发给客户端的字符编码 |
|  character_set_database  |                  当前选中数据库的默认字符集                  |
|   character_set_system   |  系统元数据(字段名等)字符集。数据库、表和字段都用这个字符集  |

```mysql
SET character_set_client = utf8 ;
SET character_set_connection = utf8;
SET character_set_database = utf8;
SET character_set_results = utf8 ;
SET character_set_server = utf8 ;
```

# 四、数据库建模

## 1.关系数据模型

```
数据库模型（Data Model）:
	数据结构
	数据操作
	数据约束

定义:模型是对现实世界的抽象，表示对象(实体)与对象之间关系的模型，在关系数据库系统中，使用数据模型描述数据库的结构和语义
```

```
数据库模型（Data Model）:
	概念数据模型
	逻辑数据模型
	物理数据模型
	
现实世界-->概念模型-->逻辑模型-->物理模型-->数据库
```

### 1).概念数据库模型

```
定义:是面向用户的数据模型，它是用户容易理解的现实世界特征的数据抽象。最常用的概念模型是实体--关系模型

实体(Entity)
实体集(Entity Set)
属性(Atrribute)
实体标识符(ldentifier)
```

### 2).逻辑数据模型

```
定义:是是用户在数据库中所看到的数据模型，它由概念数据模型转换得到

字段(Field)
记录(Record)
关键字(Keyword)
表(Table)
```

### 3).物理数据模型

```
定义:是描述数据在物理存储介质上的组织结构，它与具体的 DBMS 相关，也与操作系统和硬件相关，是物理层次上的数据模型
```

## 2.数据库设计过程

```
1.抽象实体
2.确定实体间的关系
3.标识实体属性
4.确定关键字
```

## 3.逻辑结构设计

‘E-R 模型的建立仅完成了对系统实体和实体关系的抽象。
在关系数据库设计过程中为了创建用户所需的数据库
还需要将实体和实体关系转换成对应的关系模式，也就是建立系统逻辑数据模型

```
1)实体转换原则
将 E-R 模型中的每一个实体转换成一个关系，即二维表;实体的属性转换为关系的字段，实体的标识符转换成关系模式中的主关键字

(2)关系转换原则由于实体间存在一对一、一对多和多对多的关系，所以实体间关系在转换成逻辑模型时，不同的关系作不同的处理。若实体间联系为1:1时，可以在两个实体类型转换成两个关系模式中任意一个关系模式中加入另一个关系模式的主关键字作为实体联系的属性。

若实体间联系为1:n时，则在n端实体类型转换的关系模式中加入1端实体类型的关键字实体联系的属性。若实体间联系为n:m时，则要将实体间联系也转换成关系模式，其属性为两端实体类型的关键
```

## 4.关系模式的规范化

#### 范式

定义:范式是符合某一级别的关系模式的集合。关系数据库中的关系必须满足一定的要求，即满足不同的范式。

```
第一范式(1NF)
第二范式(2NF)
第三范式(3NF)
```

Boyee-Codd 范式(BCNF范式可以有效避免数据冗余，减少数据库的空间，减轻维护数据完整性等优点。但是随着范式的级别越高，其操作难度越大，性能降低。

### 1).第一范式

```
定义:第一范式(1NF)是对关系模式的基本要求。
简单的说就是关系中无重复列。
```

2).第二范式

```
定义:第二范式就是非主属性非部分依赖于主关键字。
```

```
这时需要通过学号和课程号作为复合主关键字，决定非主关键字的情况。因此，该购物车表不符合第二范式的要求，在实际操作中会出现如下问题0
	数据冗余:如同一件商品被n个用户购买，则商品ID，商品编号，商品名称，价格就要重复 n-1次;当一个会员购买m件商品时，其用户名就要重复m-1次。
	更新异常:若某件商品的价格要进行折扣销售，，则整个表中该商品的价格都要进行修改，否则会出现同一件商品价格不同的情况

对上述选课关系进行拆分后可形成如下3个关系。
        会员:Users(会员 ID，用户名)
        商品:Goods(商品ID，商品编号，商品名称，价格)
        购物车:!ScarInfo(会员ID，商品ID，购买数量)
```

### 3).第三范式

```
定义:第三范式是在第二范式的基础上建立起来，即满足 3NF 必须满足2NF3NF 要求数据库表中不存在非关键字列对任一候选关键字的传递函数依赖。传递函数依赖，指的是如果存在A→B→C”的决定关系，则C传递数依赖于A。也就是说，第三范式要求关系表不包含其他表中已包含的非主关键字段信息。
```

```
即存在非关系字段“类别名称”对关键字“商品ID”的传递依赖，这种情况下也会存在数据几余、更新异常、插入异常和删除异常。
    数据几余:一个类别有多种商品，类别名称会重复n-1次。
    更新异常:若要更改某类别名称，则表中所有该类别的类别名称的值都需要更改否则就会出一件商品对应多种类别。
    插入异常:若新增了一种商品类别，如果还没有指定到商品，则该类别名称无法记录到数据库中。
    删除异常:当要删除一种商品类别时，那就应该删除它在数据库中的记录，而此时与相关的商品信息也会被删除。
    
对上述选课关系进行拆分后可形成如下3个关系。
    商品:Goods(商品ID，商品编号，商品名称，价格，类别ID)
    商品类别:GoodsType(类别ID，类别名称)
```

# 5、关系代数
数据模型的建立是在对现实世界抽象的基础上优化数据存储，其目的是为了使用数据。在关系数据模型中，使用关系代数来建立数据操纵的模型关系代数是一种抽象的查询语言，是关系数据操纵语言的传统表达方式它用关系运算来表达数据查询。

### 1).传统的集合运算

```
关系的并
    关系R和S的并是由关系R和关系S的所有元组合并，再删去重复的元组，组成的新关系，记为 RUS
    RUS={tltéRVtéS}

关系的差
    关系 R和S的差是由属于R但不属于S的所有的元组组成的集合，即关系R中删除与关系.S中相同的元组，组成的新关系，记为R-S
    R-S={tItERAt≠S}

关系的交
    关系R和S的交是由既属于R又属于S的元组组成的集合，即在两个关系R与S中取相同的元组组成新的关系，记为RnS
    RnS=ftltERAtES}

笛卡尔积
    设关系R和S分别有n和m列，若关系R中有i行，关系S中有i行，则关系R和S的卡尔积是由 n+m 列且有ij行集合组成的新关系，记为 RxS
    RxS={ttltERAtES}
```
### 2).专门的关系运算
```
							选择运算
从关系中找出满足给定条件的那些元组称为选择。
其中，R为一个关系，F为逻辑函数，函数F中可以包含比较运算符和逻辑运算符
```

```
							投影运算
    从关系模式中挑选若干属性组成新的关系称为投影
    其中，R是一个关系，x是R中的属性列
```

```
							连接运算
    连接运算是从两个关系的笛卡尔积中选择属性值满足一定条件的元组，去处过程通过连接条件来控制，连接是对关系的结合。连接运算通常分为0连接和自然连接
```

```
							0 连接
    AθB
    0连接是从关系R和S的笛卡尔积中选取属性值满足一个条件运算符0的元组
    A和B是关系R和S中第A列和第B列的值或列序号。当0为符号“=”时，该连接操作称为等值连接
```

```
							自然连接
    自然连接是去除重复属性的等值连接，它是连接运算的特例，是最常用的连接运算。
    其中关系 R 和S具有同名属性 A。
```

```
							除法运算
    在关系代数中，除法运算可理解为笛卡尔积的逆运算。设被除关系R有m元关系除关系S有n元关系，那么它们的商为m-n元关系。
    R÷S
    其中在 R中每个元组i与S中每个元组i组成的新元组必在关系R中。
```